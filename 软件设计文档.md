# 《软件设计文档》
## 
版本号 | 时间 | 作者
---|--- | ---
version1.0 | 2017年5月20号 | 鞠志刚
version 2.0 | 2017年6月23号 | 鞠志刚

## 1. 总体设计
### 1.1 需求规定
#### 总体需求：实现从系统获取图片并处理的功能，完成图片保存功能等。
#### 界面要求：容易操作、简洁、美观等
### 1.2 软硬件环境需求 
#### 软件开发平台：Android Studio、Android开发语言。
#### 软件运行环境：Android系统（minSDKVersion = 15）
### 1.3 软件前端总体结构
```
graph TD
    A[软件] --> B(图片选取)
    A[软件] --> C(图片编辑)
    A[软件] --> D(图片展示)
    B(图片选取) --> B1(从相册选择)
    B(图片选取) --> B2(从相机选择)
    C(图片编辑) --> C1(具体图片操作)
    D(图片展示) --> D1(重新编辑)
    D(图片展示) --> D2(图片保存)
    D(图片展示) --> D3(图片还原)
```

## 2. 总体描述
### 2.1 技术选型
#### 由于本次软件开发为软件设计课程作业，开发人员非全职开发者，需要花费所有时间用于开发，因而本软件开发方法为敏捷开发，争取尽量少的开发迭代次数；而开发语言在考虑课程开展和开发难度的情况下选择Android开发。
### 2.2 架构设计
#### 基于Android中系统结构与控件的特点，加之考虑编码的可组织性与层次的可划分性，本次实验采用的是MVC的架构设计。
- #### 在架构上视图层（view）采用xml文件进行界面的描述，使用的时候可以非常方便的引入，并且AS提供了在图形化进行设计的界面，十分方便；
- #### 控制层（controller）：android的控制层的任务在于相应的xml文件activity完成，其负责获取用户的操作传入模型层，并负责获得从模型层传出的输出以在视图层输出。
- #### 模型层（model）：本次试验中的模型层为执行各类具体操作的非activity的java代码，负责获得activity传入的输入进行相应的图片操作并输出。

### 2.3 模块划分
#### 主要分为三个模块：前端UI模块，图片文件裁剪模块、编辑操作模块和中间模块
- #### 前端UI模块：负责界面的编辑与显示，获取用户输入和展示程序输出
- #### 中间模块：负责传递用户操作数据和中间函数调用
- #### 图片文件裁剪模块、编辑操作模块：负责执行用户指定的对图片的相关操作

## 3. 软件设计技术使用
### 3.1 工厂模式（factory pattern）
#### 对应的模块为中间模块，在源代码中出现的位置为“FantasyImage/app/src/main/java/com/example/alienware/fantasy_image/Factory”目录下，为两个Java文件，分别为“FilterFactory.java”和“ProcessImageFactory.java”两个文件，用于中间函数调用。
### 3.2 单例模式（Singleton pattern）
#### 出现位置为“FantasyImage/app/src/main/java/com/example/alienware/fantasy_image/SysApplication.java”,属于前端UI模块，每个activity中通过调用SysApplication.getInstance().addActivity(this)实现对activity界面的退出等管理操作。
## 4. 可维护性与可拓展性
#### 由于本项目开发工具为Android Studio,运行环境为Android系统，且在便携时层次性较好，因而本次具有较良好的可拓展性；本次实验软件产品为个人用户非网络应用，因而对可维护性没有过大的要求。